- day: 06
  month: Oct
  title: "Laborversuch Application Migration and Modernization Techlab"
  subtitle: |
            <img src="/images/blogposts/AMM_Blogpost_2.png" alt="AMM Techlab Rückblick"/>
            APPUiO bietet ein neues Techlab - <a href="https://www.appuio.ch/ammtechlab.html">das Application Migration and Modernization Techlab</a> - an. Im letzten Monat wurde ein interner Testlauf bei Puzzle durchgeführt. Ob der Inhalt den Erwartungen entsprach und die Infrastruktur einwandfrei klappte, erfährst du in diesem Blogpost.
    
  details: |
               <p>Der Testlauf begann um 09:00 Uhr und wurde von Thomas Philipona und Christoph Raaflaub durchgeführt. Zwölf Teilnehmende haben sich in die Videokonferenz eingehängt. Zusätzlich waren noch Qualitätsinspektoren und der Betriebssupport dabei.</p>
               <p>Zu Beginn äusserten die Teilnehmenden ihre Erwartungen an das Techlab. Die Erwartungen wurden in einem <a href="https://codimd.web.cern.ch/">CodiMD</a> erfasst, welches ein kollaboratives Bearbeiten von Dateien im Markdown Format ermöglicht. Glücklicherweise entsprach der grösste Teil der Erwartungen dem Inhalt des Techlabs. ✔ Check </p>
               <p><b>Intro Techlab</b></p>
               <p>Thomas begann das Techlab mit einer kurzen Einführung in die Thematik, welche im Inhalt und Ablauf des Tages mündete. Danach rekapitulierte er die Themen Docker, Kubernetes und OpenShift.</p>
               <p><b>Techlab Infrastruktur</b></p>
               <p>Nach dem kurzen theoretischen Teil durften die Probanden bereits das ersten Mal Hand anlegen. Dabei wurde ihnen die Techlab Infrastruktur präsentiert. Jedem Teilnehmenden wurde eine persönliche Web-IDE zur Verfügung gestellt. Dazu wurden von den Testleitern <a href="https://hub.docker.com/r/codercom/code-server">Code Server Instanzen</a> auf der OpenShift Plattform Container vorbereitet. Das sind <a href="https://code.visualstudio.com/">VS Code IDEs</a>, auf welche mit dem Browser zugegriffen werden können. Zusätzlich hatten die Testleiter die benötigten Tools im Container vorinstalliert.</p>
               <p>Mit diesem Setup kann das ganze Techlab per Browser durchgeführt werden. Damit wird Zeit gespart, da das Installieren der benötigten Tools wegfällt.</p>
               <p><b>Applikationsmigration auf OpenShift</b></p>
               <p>Die Erwartungen an diese Präsentation waren sehr hoch. In der Präsentation beleuchtete Thomas das Thema “Transformation einer Applikation” und klärte die Frage, was einwandfrei in einem Container laufen kann.</p>
               <img src="/images/blogposts/AMM_Blogpost_1.png" alt="Transformation Applikation"/>
               <p>Danach wurde auf die verschiedenen Faktoren eingegangen, die für eine gute Applikationsarchitektur benötigt werden. Thomas beendete die Präsentation mit dem Hinweis auf die Automatisierung der Delivery Pipeline.</p>
               <p><b>Demo</b></p>
               <p>Christoph zeigte in einer kurzen Demo, wie eine <a href="https://golang.org/">Go Applikation</a> containerisiert wird. Dabei wurde das Container Image mit <a href="https://github.com/containers/buildah">Buildah</a> gebaut und mit <a href="https://podman.io/)">Podman</a> auf Docker Hub gepusht. Dieses Image wurde danach auf OpenShift deployed.</p>
               <p>Mit dem neuen OpenShift Do Tool, kurz <a href="https://github.com/openshift/odo">odo</a>, konnte Christoph mit einigen Kommandos eine Applikation auf OpenShfit erstellen. Der lokale Code wurde automatisch per Hot-Sync direkt in einen Pod auf OpenShift gesyncht. Es ist als würde die Applikation direkt im OpenShift selbst entwickelt.</p>
               <p><b>Erstes Lab</b></p>
               <p>In diesem praktischen Teil durften die Probanden anhand von Anleitungen Applikationen containerisieren und auf OpenShift deployen. Dabei wurden zuerst die OpenShift Ressourcen-Definitionen von Hand erstellt und per OpenShift Cli angewendet. Wie die Applikationen auf die Umgebungen angepasst werden können, wurde über Environment Variablen gezeigt. Die Teilnehmenden, die bereits früher fertig waren, konnten sich in zusätzliche Labs stürzen.</p>
               <p><b>OpenShift als Firmeninfrastruktur</b></p>
               <p>Nach dem ausgedehnten Lab wurde es wieder Zeit für eine kurze Präsentation. Vielfach sind Firmeninfrastrukturen sehr gut abgesichert. Das beeinflusst das Builden und Deployen von Applikationen auf OpenShift. Wie damit umgegangen werden kann und wie beispielsweise Zugriffe über Proxy-Server konfiguriert werden können, wurde von Christoph erläutert. Das Gelernte konnten die Teilnehmenden anschliessend in einem Lab umsetzen.</p>
               <p><b>CI/CD und Best Practices</b></p>
               <p>In diesem Block wurden die Teilnehmenden von Thomas in das Thema CI/CD mit OpenShift eingeführt. Nach einer kurzen Exkursion in die Vergangenheit wurde auch Continuous Integration und Continuous Delivery behandelt. Weiter wurde der Entwicklungsprozess und Best Practices im Cloud Umfeld aufgezeigt. Für die Automatisierung wurde die Continuous Delivery Pipeline vorgestellt.</p>
               <p>Im zweiten Teil konnten die Teilnehmenden eine Build Pipeline mit <a href="https://tekton.dev/">Tekton</a> bauen und GitOps mit <a href="https://argoproj.github.io/argo-cd/">ArgoCD</a> automatisieren. Zusätzlich hatten die beiden Testleiter ein <a href="https://operatorhub.io/">Operator</a> Lab vorbereitet.</p>
               <p><b>Fazit</b></p>
               <p>Die Infrastruktur war stabil, es wurden nur einige Feintunings vorgenommen. Wenige Teilnehmende hatten wegen den Projekt Quotas einige Einschränkungen bei den Übungen. Dabei  hatten sie die Applikationen in einem falschen Projekt (nicht nach Anleitung) deployed, wo bereits andere Pods am Laufen waren.</p>
               <p>Die meisten Erwartungen wurden erfüllt. Das Thema Applikations-Modernisierung ist gemäss den Probanden zu wenig thematisiert worden. Dies werden die Testleiter für die nächste Durchführung beachten.</p>
               <p>Es hatte sich gezeigt, dass es wichtig ist, das <a href="https://appuio.ch/ostechlab.html">APPUiO OpenShift Techlab</a> bereits besucht zu haben oder über entsprechendes Kubernetes- und OpenShift-Wissen zu verfügen. Ansonsten ist es schwierig den Präsentationen zu folgen oder die Labs durchzuführen.</p>
               <p>Haben wir dein Interesse geweckt? Hier kannst du dich sogleich <a href="https://www.appuio.ch/ammtechlab.html">anmelden</a>. Wir freuen uns auf dich!</p>
               <p>Hast du Fragen oder Anregungen? Melde dich unter <a href="mailto:hello@appuio.ch">hello@appuio.ch</a>.</p>
               
- day: 16
  month: Jul
  title: "HRM Systems AG und APPUiO"
  subtitle: |
            <img src="/images/blogposts/HRM.png" alt="HRM"/>
            HRM Systems AG bietet mittelgrossen und grossen Unternehmen schweizweit eine digitale Lösung für die Administration von Absenzen und Versicherungen sowie den Personalprozess des betrieblichen Gesundheitsmanagements. HRM Systems setzt für ihre Container-Plattform auf APPUiO.
  details: |
               <p>Durch die erschwerte Koordination von mehreren Applikationen in der vorhandenen Umgebung und der immer grösser werdenden technischen Herausforderung, entschied sich HRM Systems für den Aufbau eines OpenShift Clusters für eine eigene Container-Plattform.</p>
               <p>Das Managed Angebot von APPUiO inklusive Setup und Betrieb der Container-Plattform stellte für HRM System die optimale Lösung dar. Der Managed Private Cluster wurde auf <a href="https://www.cloudscale.ch/de/">cloudscale.ch</a> aufgebaut. Mit APPUiO kann sich HRM Systems auf ihr Kerngeschäft, die Applikation und das Deployment, konzentrieren und APPUiO stellt den Betrieb der Plattform sicher. Darüber hinaus konnte durch den Aufbau der Container-Plattform das Ressourcenmanagement von HRM Systems sichergestellt werden. Ein besonderes Augenmerk wurde ebenfalls auf Security Features gerichtet.</p>
               <p> Die Container-Plattform wurde 2017 erfolgreich realisiert und ist seitdem in Betrieb. So war «APPUiO [...] unser Sprungbrett in die Cloud. Die Sicherheit, Flexibilität und Kompetenz überzeugt uns und unsere Kunden.», sagt Dieter Joho, Leiter der IT-Entwicklung.</p>


- day: 23
  month: Jun
  title: "New: Partnership with Rancher"
  subtitle: |
            <img src="/images/blogposts/Rancher_Partnerschaft.png" alt="Rancher Partnerschaft"/>
            With Rancher, we are adding another Kubernetes distribution to our portfolio in addition to Red Hat OpenShift. 
  details: |
               <p>The growing requirements and specific use cases of our customers can now be covered with different distributions. With APPUiO we are now in the position to include additional use cases and always offer our customers the optimal solution.</p>
               <p><b>Rancher partnerships</b></p>
               <p>Both companies behind APPUiO are rancher partners. Already for one year <a href="https://vshn.ch/">VSHN AG</a> maintains the partnership with Rancher. <a href="https://www.puzzle.ch/de/home">Puzzle ITC GmbH</a> has recently become a proud Platinum Partner. In order to use these synergies in the best possible way, we have decided to complete the common Open Container platform APPUiO with Rancher.</p>
               <p>Together with some customers we could already evaluate the suitable container platform in a study. This resulted in follow-up projects in which we have built a Kubernetes platform based on Rancher. One project, for example, we were able to carry out with the <a href="https://www.puzzle.ch/referenzen/rancher-container-plattform-fuer-liechtenstein">Liechtenstein National Administration (LLV)</a>.</p>
               <p><b>Rancher</b></p>
               <p><a href="https://rancher.com/">Rancher Labs</a> is a California-based open source software company that helps manage Kubernetes. With Rancher it is possible to run Kubernetes on any infrastructure. Rancher has a Kubernetes distribution and a web-based multi-cluster management tool for operation. With the multi-cluster management tool you can administer your own and other Kubernetes distributions as well as managed Kubernetes offers such as those from Amazon, Google or Microsoft. Rancher provides companies with a fast and uncomplicated way into the world of container orchestration and offers a lot of flexibility when designing a container platform. Rancher's distribution is based on Vanilla Kubernetes and integrates further tools from the <a href="https://landscape.cncf.io/">CNCF landscape</a> such as monitoring, logging, service mesh etc.</p>
               <p>The addition of a further distribution enables APPUiO to offer a diversified range of container solutions. Through a careful evaluation, we will help you decide which Kubernetes distribution is right for you and your business. <a href="mailto:hello@appuio.ch">Contact</a> us and we will meet for a coffee.</p>
               

- day: 16
  month: Jun
  title: "Productive workload with OpenShift 4"
  subtitle: |
            <img src="/images/blogposts/Produktiver_Workload.png" alt="Produktiver Workload"/>
            Almost a year after the initial release of OpenShift 4, we believe the OpenShift Container Platform (OCP) version 4.4 is ready for productive workloads.
  details: |
               <p>Our experience has shown that it made sense to wait with upgrades - or in the case of OpenShift 4 with migrations - until all the initial issues of the new major release were resolved. Therefore, since the first release 4.1 we have put all OpenShift versions through their paces and checked their maturity level. Right at the beginning we wrote a <a href="https://appuio.ch/blog.html#2019-Aug-29">blog post</a> about the essential differences to version 3. Subsequently, VSHN and Puzzle, the companies behind APPUiO, gained experience with the new versions. For example, some engineers from VSHN spent a week dedicated to testing the latest version on their <a href="https://www.appuio.ch/managed-private.html">managed platform</a>. At Puzzle, experience was gained during a <a href="https://appuio.ch/blog.html#2020-Jan-30">mid-week</a> (a "project week" of the middleware team) on how best to support customers with <a href="https://www.appuio.ch/unmanaged.html">self-managed platforms</a>. We shared this experience with our community at our last APPUiO BeerUp.</p>
               <p><b>Advantages of switching to OpenShift 4</b></p>
               <p>From our point of view, the latest OpenShift version brings many advantages for both the operator and the user.</p>
               <p>Meanwhile, the level of maturity of the newly appointed operators leaves little to be desired. For the operation of a cluster, updates are on the one hand much faster and on the other hand much easier and more stable. This also simplifies operations, as operators can react to changes and correct them if necessary. Operators are a new concept also for the operation of applications as users of OpenShift. This new world of course requires a training period until debugging feels as easy as it used to be for deployments.</p>
               <p>The switch from Docker to Buildah for container builds now allows to build container images in a more secure way. This is a welcome innovation for all multitenant clusters such as public platform providers and corporate clusters with multiple users. With the introduction of the OpenShift Service Mesh, developers in particular will gain new insight and new possibilities to visualize, secure and optimize the communication of their applications.</p>
               <p>A list of the <a href="https://docs.openshift.com/container-platform/4.4/release_notes/ocp-4-4-release-notes.html">latest features</a> can be found here.</p>
               <p><b>Self Managed</b></p>
               <p>If the customer chooses our Self Managed product, we help him to set up the container platform, pass on our know-how and provide support in engineering and automating deployments (CI/CD).</p>
               <p>We have already set up various OpenShift 4.3 and 4.4 platforms, whether for an public administration in Basel or an authority in Bern. We have also performed first migrations from OpenShift 3.11 to 4.3. Because there is no upgrade path, a new cluster must be built and the workload migrated. We have also already been able to implement this for various customers, e.g. <a href="https://www.puzzle.ch/referenzen/openshift-plattform-fuer-die-bls-ag">BLS</a>.</p>
               <p><b>Managed</b></p>
               <p>If the customer decides in favour of our Managed product, we take over the setup and additionally the operation of the container platform. In order to ensure that operations run smoothly and are automated to a large extent, a wide variety of processes must be adapted and automated. The platform must first be accurately tested. Because this takes some time, the roadmap for managed clusters is as follows, depending on the infrastructure:</p>
               <div style="padding-left: 30px;">▸ Google GCP Q2 2020</div>
               <div style="padding-left: 30px;">▸ cloudscale.ch Q3 2020</div>
               <div style="padding-left: 30px;">▸ Azure Q3 2020</div>
               <div style="padding-left: 30px;">▸ AWS Q3 2020</div>
               <div style="padding-left: 30px;">▸ Exoscale Q4 2020</div>
               <div style="padding-left: 30px;">▸ VMware Q4 2020</div>
               <div style="padding-left: 30px;">▸ Hyper-V Q4 2020</div>
               <p><b>Public</b></p>
               <p>For our Public product, which is dependent on the automated processes and testing of the Managed product, there will be a beta program in Q3. Customers are welcome to participate. You get early access to the OpenShift 4 platform and can test your applications on it. If you are interested in OpenShift 4, you can register for the Early Access Program here.</p>            
               <!--[if lte IE 8]> <script charset="utf-8" type="text/javascript" src="https://js.hsforms.net/forms/v2-legacy.js"></script> <![endif]-->
               <script charset="utf-8" type="text/javascript" src="https://js.hsforms.net/forms/v2.js"></script>
               <script>
               hbspt.forms.create({
               portalId: "7105834",
               formId: "e440b5d4-1d8f-481a-8dc3-3a73368701ac"
               });
               </script>
               <p><b>Trainings and Techlabs</b></p>
               <p>Of course our <a href="https://appuio.ch/blog.html#2020-Mar-18">APPUiO Techlab also runs on the new OpenShift version</a>. If you would like to learn more about OpenShift 4 and Operators in an afternoon, please <a href="https://appuio.ch/techlabs.html">register here</a>. Starting this summer, we will be conducting another Techlab, the Application Migration and Modernization (AMM) Techlab. It shows you how to bring applications from your system landscape onto the new container platform. Furthermore our training material for the Operations and the Apps on OpenShift training is on the latest OpenShift version.</p>
               <p>Do you need support with your platform or would you like to build a new platform? Get in touch with us and we will have a coffee or a beer together (can also be done remotely). Please contact us on <a href="mailto:hello@appuio.ch">hello@appuio.ch</a>.</p>


- day: 28
  month: Mai
  title: "Das Amt für Informatik & Organisation und APPUiO"
  subtitle: |
            <img src="/images/blogposts/Self_Managed.png" alt="Kanton Solothurn"/>
            Die technologische Verantwortung liegt im Kanton Solothurn beim Amt für Informatik und Organisation (AIO). Das AIO ist die zentrale Anlaufstelle für alle Informatikbelangen und verantwortlich für die Umsetzung, Beratung und Unterstützung der Departemente sowie den Unterhalt und Betrieb der zentralen und/oder übergreifenden Informatik- und Kommunikationssystemen. Kanton Solothurn setzt beim Aufbau einer modernen Container-Plattform auf APPUiO. Mit der neuen PaaS unterstützt das AIO die Arbeit der kantonalen Verwaltung und deren Departemente. 
          
  details: |
               <p>Die Umgebung der klassischen IT vom AIO war bis zum Jahr 2017 für die Entwickler sehr komplex, zeitaufwändig, unflexibel und schwer zu koordinieren. Nach intensiver Recherche wurde der Einsatz von OpenShift als neue Plattform gewählt. Das Ziel dabei war es, einen effizienteren Betrieb und eine verbesserte Zusammenarbeit zwischen Entwicklung und Betrieb zu erlangen. Dabei wurde eine OpenShift Plattform von APPUiO aufgebaut. Weiter sammelten die System Engineers Erfahrungen mit der Plattform, damit der Betrieb einwandfrei funktioniert. Dies beinhaltet eine Integration ins Monitoring, Alerting und ein funktionierendes Backup.</p>
               <p>Aus dem vielfältigen Angebot von APPUiO entschied sich das Amt für Informatik und Organisation des Kanton Solothurn für die APPUiO <a href="https://appuio.ch/unmanaged.html">"Self Managed"</a>-Lösung: Eine Container Plattform im eigenen Rechenzentrum, optimal integriert in die eigene Infrastruktur.</p>
               <p>Von dem Architektur Workshop, wobei gemeinsam die Architektur der Plattform definiert wurde, bis hin zum Deployment und Konfiguration des Clusters wurde das AIO von unseren Experten unterstützt. Das Setup wurde gemeinsam umgesetzt, wodurch bereits das Know-How der Engineers des Kanton Solothurns aufgebaut werden konnte. Im Anschluss des Cluster Aufbaus profitierte das AIO vom OpenShift 3rd Level Support Angebot unserer Experten. Die Supportleistungen beziehen sich auf die Analyse und Lösung technischer Problemstellungen ihrer OpenShift Plattform. Zudem kann das AIO das Supportteam bei fachlichen und technischen Fragestellungen oder bei Cluster Upgrades konsultieren. Der Vorteil für das AIO sind die kompetenten Kenntnisse des Supportteams sowie die präferierten Reaktionszeiten. Dank dem 3rd Level Support konnte ein reibungsloser Betrieb von Beginn an ermöglicht werden.</p>

- day: 20
  month: Apr
  title: "Free Upgrade: Higher performance on APPUiO Public"
  subtitle: |
            <img src="/images/blogposts/faster_is_better.png" alt="faster is better"/>
            Fantastic news for all APPUiO Public Shared users: we recently have successfully upgraded our APPUiO Public infrastructure to a whole new level. All APPUiO Public Shared Nodes and Storage Nodes were upgraded to the new Plus flavors on <a href="https://www.cloudscale.ch/de/">cloudscale.ch</a>. This means that you will now profit automatically from increased speed and performance while paying the same price. Some APPUiO customers reported to us a performance increase of around 15% compared to the old infrastructure. 
            
  details: |
             <p>The new Plus flavors are high performance cloud servers on the newest available hardware platform and the underlying physical computing power is not overcommitted. We hope that you are as happy with this upgrade as we are and would love to hear about your experience.</p>
             <p><b>APPUiO Public on <a href="https://www.cloudscale.ch/de/">cloudscale.ch</a></b></p>
             <p><a href="https://www.cloudscale.ch/de/">cloudscale.ch</a> is a APPUiO infrastructure partner since the beginning of APPUiO. Thanks to their brand new AMD-based hardware platform, customers can benefit from high performance environments. This way, the computing power they need is guaranteed to be readily available at any time. This offer is made possible by the use of leading-edge hardware. <a href="https://www.cloudscale.ch/de/">cloudscale.ch</a> is one of the very first IaaS providers to employ compute nodes with the recently launched AMD EPYC "Rome" processors, which feature up to 64 physical cores per socket.</p>
             <p>You can find more information on the <a href="https://www.cloudscale.ch/en/news/2019/11/19/even-more-power-thanks-to-plus-flavor">cloudscale.ch blog</a>.</p>

- day: 25
  month: Mar
  title: "Coronavirus: APPUiO 90 Tage kostenlos"
  subtitle: |
            <img src="/images/blogposts/Voucher_Corona.png" alt="Voucher APPUiO Public 4.3"/>
            Wir erleben gerade noch nie dagewesene Zeiten aufgrund des Coronavirus. Die COVID-19-Pandemie hat erhebliche Auswirkungen auf die Gesundheit der Menschen, unseren Alltag wie auch auf Unternehmen und die Wirtschaft. Angesichts dieser besonderen und immer grösser werdenden Herausforderungen, die wir alle momentan meistern müssen, möchten wir von APPUiO ebenfalls einen Beitrag leisten.
          
  details: |
             <p>Deshalb bieten wir dir als "Soforthilfe" ein APPUiO Public auf <a href="https://www.cloudscale.ch/de/">cloudscale.ch</a> mit 1100 mC CPU, 2.0 GiB Memory für volle 90 Tage kostenlos an, was einem Wert von CHF 300.- entspricht.</p>
             <p>Geh einfach auf <a href="https://register.appuio.ch/">https://register.appuio.ch/</a>, gib deine E-Mail-Adresse und den folgenden Voucher-Code ein: <b>APPUIO-COVID19</b></p>
             <p>Beeil dich, es sind maximal 100 Codes verfügbar und die Aktion gilt 1x pro Benutzer bzw. Firma.</p>
             <p>Liebe Grüsse und trage Sorge zu dir</p>
             <p>dein APPUiO-Team.</p>

- day: 18
  month: Mar
  title: "Neu: Techlab auf OpenShift 4.3"
  subtitle: |
            <img src="/images/blogposts/techlab_auf_openshift_4.3.png" alt="techlab auf OpenShift 4.3"/>
            Vor einiger Zeit hat Red Hat die OpenShift Version 4.3 auf den Markt gebracht. Diese Version hat eine gewisse Reife und kann mit gutem Gewissen auch für produktiven Workload verwendet werden. Aus diesem Grund bieten wir neue Techlabs an!
          
  details: |
             <p>Die #39 Durchführung unseres gratis APPUiO Techlabs wird auf Basis von OpenShift 4.3 durchgeführt. Dabei zeigen wir dir die Unterschiede zu der Version 3 und geben unsere Erfahrungen sowie Tipps und Tricks weiter. Du machst erste Schritte auf einer OpenShift 4.3 Plattform, deployst Applikationen und skalierst diese ganz einfach. Weiter haben wir ein Operator Lab erarbeitet, wo du erste Gehversuche mit dem neuen Operator Framework machen kannst.</p>
             <p>Melde dich wie gewohnt über unsere <a href="https://appuio.ch/techlabs.html">Webseite</a> an.</p>
             <p>Falls du Fragen zur Migration von OpenShift 3.11 auf 4.3 hast, helfen wir dir gerne weiter oder schätzen wir gemeinsam den Aufwand einer solchen Migration. Melde dich dafür ganz einfach mit einer <a href="mailto:hello@appuio.ch">Mail</a>.</p>
             <p>Wenn du dich bereits ein wenig über OpenShift 4 informieren willst, kannst du <a href="https://appuio.ch/blog.html#OpenShift%204">diesen Blogpost</a> lesen.</p>
             <p><b>Aus aktuellen Umständen werden wir die kommende Durchführung am 26. März 2020 Remote abhalten. Wenn du dich für das Techlab anmeldest, erhältst du einen Link für die Techlab Remote Session.</b></p>
             <p>Dies wird für alle Beteiligten eine interessante Erfahrung und wir sind gespannt auf diese neue Herausforderung.</p>
             <p>Bleibt alle gesund und "häbet Sorg"!</p>
- day: 30
  month: Jan
  title: "RedHat OpenShift 4.2 – Installations Pitfalls, Networkingking und Storage"
  subtitle: |
            <img src="/images/blogposts/OpenShift_4.2.png" alt="OpenShift 4.2"/>
            <br>
            <a href="https://www.puzzle.ch/de/home">Puzzle ITC</a>, einer der Gründerfirmen von APPUiO, hat eine Woche genutzt, um ihr Wissen rund um OpenShift 4.2 zu vertiefen. In der sogenannten  <a href="https://www.puzzle.ch/de/blog/articles/2020/01/15/mid-week">/mid Week</a> erzielten die Members spannende Erkenntnisse bei der Installation, Networking und Storage.</a>
  details: |
             <p>Der Blog ist aufgeteilt in drei Themen:</p>
             <p><b>1. Installations-Pitfalls:</b> In der /mid Week haben wir OpenShift 4.2 sowohl auf einem VMware vSphere Cluster wie auch bei AWS, GCP und Azure installiert. Wir berichten über die Probleme, die dabei aufgetaucht sind.</p>
             <p><b>2. Networking:</b> Je nach Cloud Plattform gibt es logischerweise Unterschiede (z.B. Load Balancer). Wir haben aber auch Unterschiede zwischen OpenShift 3.11 und 4.2 festgestellt.</p>
             <p><b>3. Storage:</b> Jeder Cloud Provider bietet diverse Typen von Storage zur Integration in OpenShift an. Wir zeigen euch, was es für Möglichkeiten gibt.</p>
             <b><u>1. Installation Pitfalls</u></b>
             <p><img src="/images/blogposts/Pitfalls.jpg" alt="Pitfalls"/></p>
             <p>Wenn du in diesem Blog nach einer Anleitung suchst, wie OpenShift 4.2 installiert wird, bist du leider falsch. Für die Installationen haben auch wir die offiziellen <a href="https://docs.openshift.com/container-platform/4.2/welcome/index.html">Anleitungen von RedHat</a> verwendet.</p>
             <p>Vorneweg: Die Installation wird mit OpenShift Version 4.2 deutlich einfacher und schneller als mit 3.11. Generell - egal für welche Zielplattform - haben wir Folgendes festgestellt:</p>
             <li>Kleinere Umgebungen als 3 Master / 3 Node (Standardvorgabe) sollten nicht gewählt werden. Es wird sehr langsam oder die Installation schlägt teilweise sogar fehl. </li>
             <li>Für den OpenShift Installer wird ein <em>install-config.yaml</em> File erstellt. Dies sollte vor Beginn der Installation gesichert werden, da der Installer dieses anschliessend löscht.</li>
             <li>Weiter sollten auch alle Terraform Output Files gesichert werden, damit später der Cluster einfach gelöscht werden kann. Achtung, beim Löschen des Cluster erfolgt keine zusätzliche Bestätigung!</li>
             <li>Je nach Plattform haben wir unterschiedliche Grössen der Standard-VM festgestellt.</li>
             <li>Wenn <a href="https://docs.openshift.com/container-platform/4.2/installing/installing_aws/installing-aws-customizations.html#ssh-agent-using_install-customizations-cloud">während der Installation</a> kein SSH-Keyfile angegeben wurde, kann anschliessend nicht auf die VM's per SSH zugegriffen werden.</li>
             <p>Die Installation eines Clusters dauert je nach Plattform unterschiedlich lang:</p>
             <img src="/images/blogposts/Installationsdauer.png" alt="Installationsdauer"/>
             <p><b>VMware vSphere</b></p>
             <p>Einige Bemerkungen zur VMware vSphere Installation:</p>
             <li>Die Dokumentation zur Installation war sehr gut und wir konnten dieser Schritt für Schritt folgen.</li>
             <li>Während der (ersten) Installation mussten wir feststellen, dass Reverse DNS Einträge zwingend notwendig sind. Die Installation war blockiert und wir mussten von neuem beginnen.</li>
             <li>Kleine Fehler in den Ignition (JSON) Files führen zu Fehler, die leider sehr schwer zu finden sind, da keine sinnvolle Fehlermeldung vorhanden ist. So hat uns z.B. ein fehlendes Komma etwa eine Stunde Zeit gekostet. Ignition Files können <a href="https://coreos.com/validate/">hier</a> validiert werden.</li>
             <li>Für die Installation muss ein Load Balancer (z.B. HAproxy) erstellt werden. Siehe auch unten im Teil zu Networking.</li>
             <li>Infrastructur MachineSets für vSphere sind noch nicht implementiert. Daher ist die Installation auf VMware vSphere auch eine <a href="https://blog.openshift.com/openshift-4-install-experience/">User Provisioned Infrastructure (UPI)</a> Installation.</li>
             <p><b>GCP</b></p>
             <p>Damit die Installation auf GCP funktioniert, müssen die folgenden APIs aktiviert sein:</p>
             <li>Identity and Access Management(IAM)</li>
             <li>Cloud Resource Manager API</li>
             <p>Weiter muss die Disksize Limit von 500GB auf 750 GB erh&ouml;ht werden (640GB benutzt nach der Installation). Das Definieren im <em>install-config.yaml</em> File des OpenShift Installer funktioniert leider nicht:</p>
             <pre class="western">
             platform:
                gcp:
                   rootVolume:
                   iops: 4000
                   size: 50
                   type: io1
                type: n1-standard-4</pre>
             <p><b>Azure</b></p>
             <p>Einige Bemerkungen zur Installation auf Azure:</p>
             <li>Free Tier Subscription reicht nicht aus für eine OpenShift Installation.</li>
             <li>Es müssen Anpassungen an den default Azure Account Limits gemacht werden.</li>
             <li>Zürich befindet sich z.Z. nicht unter den supported Azure Regions.</li>
             <li>Die Dokumentation ist falsch bzgl. <em>Azure account limits & Creating a service principal</em>.</li>
             <p><b>AWS</b></p>
             <p>Die Installation auf AWS war am einfachsten. Das liegt wohl daran, dass bereits Openshift 4.0 darauf ausgelegt war.</p>
             <b><u>2. Networking</u></b>
             <p><img src="/images/blogposts/networking.png" alt="networking"/></p>
             <p><b>Load Balancing</b></p>
             <p>Für eine RedHat OpenShift 4.2 Installation werden zwei Load Balancer vor dem Cluster benötigt:</p>
             <li><b>API Load Balancer:</b> Für eine Hochverfügbarkeit der Kubernetes-API (welche auf dem Master läuft), müssen alle API Calls an diese Master Nodes verteilt werden.</li>
             <p>Auf den drei Cloud Provider konnten wir dafür jeweils den Load Balancer Service des Providers verwenden. Dieser wird mit dem OpenShift Installer automatisch konfiguriert. Auf VMware vSphere mussten wir dafür selber einen Load Balancer konfigurieren. Wir haben dafür eine CentOS VM mit HAProxy verwendet. Für die hohe Verfügbarkeit kann z.B. keepalived verwendet werden.</p>
             <li><b>Client Access Load Balancer:</b> Für den Zugriff auf den Applikation Workload wird ein Load Balancer benötigt, der die Ingress Controller weiterleitet.</li>
             <p>Für den Client Access Load Balancer kann auf die Cloud Provider Integration von Kubernetes zurückgegriffen werden. Damit werden mit Hilfe eines <a href="https://kubernetes.io/docs/concepts/services-networking/service/#
             lancer">Kubernetes Services vom Typ Load Balancer</a> automatisch ein Load Balancer auf der entsprechenden Cloud Plattform provisioniert.</p>
             <p>Bei der on-premise Installation mit VMware vSphere muss der Load Balancer selber implementiert werden, welcher den Netzwork Traffic auf die Ingress Controller weiterleitet. Das automatische Erstellen des Load Balancers via Kubernetes Service funktioniert hier leider nicht.</p>
             <p><b>Egress Traffic & NetworkPolicy</b></p>
             <li><b>NetworkPolicy:</b>Die Kubernetes v1 NetworkPolicy Features sind in OpenShift 4.2 verfügbar</li>
             <li><b>Egress IP:</b> Identisch zu OpenShift 3.11. <a href="https://docs.openshift.com/container-platform/4.2/networking/openshift-sdn/assigning-egress-ips.html">(Referenz)</a></li>
             <li><b>EngressNetworkPolicy</b> wir auf OpenShift 4.2 nicht unterstützt </li>
             <li><b>EgressRouter</b> wird auf OpenShift 4.2 nicht unterstützt </li>
             <b><u>3. Storage</u></b>
             <p><img src="/images/blogposts/storage.jpg" alt="storage"/></p>
             <p>Abschliessend schauen wir uns noch die diversen Storage Integrationen für OpenShift 4.2 an. Wir teilen Storage in drei Kategorien ein: Block Storage, File Storage und Object Storage.</p>
             <p><b>Black Storage</b></p>
             <p>Erfreulicherweise hatten wir mit keinem Provider (onpremise wie auch Cloud) Probleme. Nach der Installation gemäss Anleitung konnten wir Block Storage von allen Cloud Providern beziehen. Alle Infos dazu sind in der entsprechenden Dokumentation von RedHat zu finden.</p>
             <li><a href="https://docs.openshift.com/container-platform/4.2/storage/persistent-storage/persistent-storage-gce.html">GCP</a></li>
             <li><a href="https://docs.openshift.com/container-platform/4.2/storage/persistent-storage/persistent-storage-azure.html">Azure</a></li>
             <li><a href="https://docs.openshift.com/container-platform/4.2/storage/persistent-storage/persistent-storage-aws.html">AWS</a></li>
             <li><a href="https://docs.openshift.com/container-platform/4.2/storage/persistent-storage/persistent-storage-vsphere.html">vSphere</a></li>
             <p><b>File Storage</b></p>
             <p>Als File Storage bezeichnen wir solchen, der insbesondere shared bezogen werden kann <a href=https://kubernetes.io/docs/concepts/storage/persistent-volumes/#access-modes">(ReadWriteMany - RWX)</a>.</p>
             <p><b>AWS</b></p>
             <p>Auf AWS steht uns <a href="https://aws.amazon.com/efs/">EWS</a> zur Verfügung, dabei haben wir jedoch Folgendes festgestellt:</p>
             <li>Auf EFS sind alle Volumes nur Subfolder des Root Volume.</li>
             <li>Quotas können nicht forciert werden.</li>
             <li>Keine Usage Metrics</li>
             <li><em>size</em> in einem PVC wird nicht berücksichtigt.</li>
             <li>RedHat sagt zu EFS: <em>"Elastic File System is a Technology Preview feature only.[...]"</em> <a href="https://docs.openshift.com/container-platform/4.2/storage/persistent-storage/persistent-storage-efs.html">Openshift doc on EFS</a></li>
             <li>upstream efs-provisioner: <a href="https://github.com/kubernetes-incubator/external-storage/tree/master/aws/efs">detailed doc & code</a></li>
             <p>Weiter kann auch Netapp Trident verwendet werden. In unserer /mid Week haben wir dies jedoch nicht angeschaut (auch nicht auf den anderen Cloud Provider Plattformen). Dafür wird ein AWS Account mit konfiguriertem NetApp CVS (1TB / 100$ / Monat) benötigt. Infos dazu in der <a href="https://netapp-trident.readthedocs.io/en/stable-v19.07/kubernetes/operations/tasks/backends/cvs_aws.html">Netapp Trident Dokumentation</a>.</p>
             <p><b>Azure</b></p>
             <p>Microsoft bietet mit Azure File die Möglichkeit, dynamisch File Storage zu beziehen. Die folgenden Features werden dabei aber nicht supported.</p>
             <li>Symlinks</li>
             <li>Hard links</li>
             <li>Extended attributes</li>
             <li>Sparse files</li>
             <li>Named pipes</li>
             <p>Alle Informationen dazu sind in der <a href="https://docs.openshift.com/container-platform/4.2/storage/dynamic-provisioning.html#azure-disk-definition_dynamic-provisioning">RedHat OpenShift Dokumentation</a> zu finden. Auch auf Azure kann <a href="https://netapp-trident.readthedocs.io/en/stable-v19.07/kubernetes/operations/tasks/backends/anf.html">Netapp Trident</a> verwendet werden.</p>
             <p><b>GCP</b></p>
             <p>Auf GCP stehen <a href="https://cloud.google.com/solutions/filers-on-compute-engine">mehrere Möglichkeite</a>n zur Verfügung.</p>
             <p>Für <a href="https://cloud.google.com/community/tutorials/gke-filestore-dynamic-provisioning">Cloud File Store kann der nfs-client-provisioner</a> verwendet weren. Auch hier können Quotas nicht forciert werden. Weiter gibt es einen nicht offiziell supporteten <a href="https://github.com/kubernetes-sigs/gcp-filestore-csi-driver">CSI Treiber</a>, den wir aber nicht wirklich zum Laufen gebracht haben.</p>
             <p>Weiter kann auch hier NetApp Cloud Volumes mit Trident verwendet werden. Wir haben hierzu aber keine Dokumentation gefunden. Dies sollte aber ähnlich wie bei <a href="https://netapp-trident.readthedocs.io/en/stable-v19.04/kubernetes/operations/tasks/backends/cvs_aws.html">AWS</a> seine. Weitere Infos dazu sind <a href="https://cloud.google.com/solutions/filers-on-compute-engine#netapp">hier</a> zu finden.</p>
             <p>Eine weitere Möglichkeit ist die Verwendung von <a href="https://github.com/Elastifile/elastifile-provisioner">Elastifile</a> oder <a href="https://github.com/quobyte/quobyte-csi">Quoabyte</a>. Diese müssen aber alle lizenziert werden. Elastifile ist nur für einen eingeschränkten Kundenkreis verfügbar. Quoabyte sieht zur Zeit noch nicht wirklich Enterprise-like aus.</p>
             <p><b>VMware vSphere</b></p>
             <p>In einer on-premise VMware vSphere Umgebung muss einen File Storage Service selbst aufgebaut werden (z.B. mit <a href="https://www.openshift.com/products/container-storage/">RedHat Contrainer Storage</a> basierend auf <a href="https://rook.io/">rook.io</a>).</p>
             <p><b>Object Storage</b></p>
             <p>Auch Object Storage wird von den drei Cloud Provider angeboten. Dieser wird aber in der Regeln nicht als PV in einen Pod gemounted, sondern direkt aus einer Applikation bezogen. Der Vollständigkeit halber hier eine Auflistung der Object Storage Services.</p>
             <li>GCP mit <a href="https://cloud.google.com/storage/">Google Cloud Storage</a></li>
             <li>AWS mit <a href="https://aws.amazon.com/s3/">S3</a></li>
             <li>Azure mit <a href="https://azure.microsoft.com/en-us/services/storage/">Azure Object Storage</a></li>
             <p>In einer on-premise VMware vSphere Umgebung muss ein Object Storage Service selbst aufgebaut werden.</p>
